<script>
  // CURSOR_POINTER
  (() => {
    const cursor = document.querySelector(".cursor-pointer");
    if (!cursor) return;

    let mouseX = 0;
    let mouseY = 0;
    let currentX = 0;
    let currentY = 0;

    const speed = 0.15; // smaller = more lag, smoother

    let started = false;

    window.addEventListener("mousemove", (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      if (!started) {
        currentX = mouseX;
        currentY = mouseY;
        started = true;
      }
    });

    const hoverTargets = document.querySelectorAll("a, button");

    hoverTargets.forEach((el) => {
      el.addEventListener("mouseenter", () =>
        cursor.classList.add("is-active")
      );
      el.addEventListener("mouseleave", () =>
        cursor.classList.remove("is-active")
      );
    });

    function animate() {
      currentX += (mouseX - currentX) * speed;
      currentY += (mouseY - currentY) * speed;

      cursor.style.transform = `translate(${currentX}px, ${currentY}px) translate(-50%, -50%)`;

      requestAnimationFrame(animate);
    }

    animate();
  })();

  document.addEventListener("DOMContentLoaded", function () {
    const allSlides = document.querySelectorAll(".marquee-content");
    const cloneCount = 3;

    allSlides.forEach((slides) => {
      for (let i = 0; i < cloneCount; i++) {
        const children = Array.from(slides.children);

        children.forEach((child) => {
          slides.appendChild(child.cloneNode(true));
        });
      }
    });

    // Blur reveal
    gsap.utils.toArray("[blur-reveal]").forEach((element) => {
      const split = new SplitText(element, { type: "words" });
      let tl = gsap.timeline({
        scrollTrigger: {
          trigger: element,
          start: "top 90%",
          end: "bottom 50%",
          toggleActions: "play none none none",
        },
      });
      tl.from(split.words, {
        y: "10%",
        skewX: "-20deg",
        filter: "blur(8px)",
        opacity: 0,
        duration: 1,
        ease: "power1.inOut",
        stagger: window.innerWidth < 768 ? 0.15 : 0.075,
      });
    });
  });
</script>
