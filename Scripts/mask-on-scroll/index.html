<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sticky Masked Video with Scrolling Content</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: #000;
        font-family: sans-serif;
      }

      /* ================= SPACERS ================= */

      .spacer {
        height: 100vh;
      }

      .scroll-wrapper {
        position: relative;
        height: 400vh;
      }
      /* ================= STICKY BACKGROUND ================= */

      .main-section {
        position: sticky;
        top: 0;
        height: 100vh;
        overflow: hidden;
      }

      /* ================= VIDEO ================= */

      .video-layer {
        position: absolute;
        inset: 0;
        z-index: 1;
      }

      .video-layer video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* ================= OVERLAY ================= */

      .fade-overlay {
        position: absolute;
        inset: 0;
        z-index: 2;
        background: rgba(0, 0, 0, 0.45);
        pointer-events: none;
      }

      /* ================= MASKS ================= */

      .mask-layer {
        position: absolute;
        inset: 0;
        z-index: 3;
        pointer-events: none;
      }

      .mask-item {
        position: absolute;
        inset: 0;
        opacity: 0;
        mask-repeat: no-repeat;
        mask-position: center;
        mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
        -webkit-mask-size: contain;
      }

      .mask-item video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* ================= CONTENT ================= */

      .content-layer {
        position: relative;
        z-index: 4;
      }

      .content-item {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4vw;
        color: white;
      }

      /* ================= MASK FILES ================= */
      
      .mask-item {
        position: absolute;
        inset: 0;
        opacity: 0;
        mask-repeat: no-repeat;
        mask-position: center;
        mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
        -webkit-mask-size: contain;
      }

      .mask-item video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .mask-1 {
        mask-image: url("#mask-1");
        -webkit-mask-image: url("#mask-1");
        /* scale: 2; */
        /* mask-position: center; */
     }

      .mask-2 {
        mask-image: url("mask2.svg");
        -webkit-mask-image: url("mask2.svg");
      }

      .mask-3 {
        mask-image: url("mask3.svg");
        -webkit-mask-image: url("mask3.svg");
      }

      .svg{
        /* display: none; */
        height: 0;
        width: 0;
      }
    </style>
  </head>

  <body>
    <div class="svg">
      <svg width="0" height="0" viewBox="0 0 801 685">
        <mask id="mask-1">

          <path d="M133.956 162.756C124.439 153.838 127.262 146.407 122.392 143.836C113.699 139.248 52.2647 132.789 0 127.208L73.4433 0C110.947 13.3144 133.138 18.0086 169.245 34.7418C181.868 40.5918 188.245 45.372 201.103 50.6865C219.967 58.4835 231.806 59.2245 251.251 65.4365C282.61 75.4549 293.35 82.3684 324.765 92.2113C335.633 95.6166 347.122 96.0923 356.179 102.999C369.416 113.094 373.406 130.787 385.522 147.855C397.842 165.211 418.761 191.044 418.761 191.044C418.761 191.044 472.753 264.334 478.476 295.064C479.367 299.849 475.799 302.549 471.438 304.713C463.683 308.562 447.417 303.964 438.501 294.023C423.929 277.774 411.725 250.648 394.374 233.284C392.62 231.53 390.408 230.61 388.565 228.951C377.95 219.394 369.743 201.433 360.577 196.141L354.344 192.542C354.344 192.542 354.225 217.975 345.73 262.5C342.111 281.469 312.841 272.896 312.841 272.896C312.841 272.896 312.337 282.267 308.197 286.866C302.521 293.172 295.763 290.025 287.421 291.522C280.299 292.801 274.727 297.42 268.593 295.345C261.897 293.078 258.499 286.578 254.89 283.515C242.207 272.75 217.768 272.421 208.055 248.635C203.834 238.3 203.317 220.433 203.317 220.433C203.317 220.433 173.232 206.495 162.001 194.62C157.399 189.755 154.509 180.5 154.509 180.5C154.509 180.5 152.328 173.363 148.988 171.435C146.055 169.742 138.902 167.392 133.956 162.756Z" fill="white"/>
          <path d="M649.404 579.442C659.063 585.444 664.684 581.389 667.948 584.911C673.774 591.197 693.078 641.48 709.573 684.239L800.135 684.239L800.135 593.677C780.458 565.095 771.497 547.465 749.256 520.831C741.48 511.52 736.015 507.228 728.637 497.598C717.814 483.47 714.518 473.667 704.898 458.692C689.383 434.541 681.137 427.056 665.758 402.819C660.437 394.434 657.443 384.865 649.583 378.796C638.094 369.926 622.292 370.558 605.182 364.206C587.784 357.747 561.307 345.958 561.307 345.958C561.307 345.958 487.397 317.025 460.224 319.139C455.992 319.469 454.524 323.083 453.685 327.244C452.194 334.644 459.737 347.306 470.122 352.572C487.096 361.178 512.695 365.335 531.235 376.03C533.108 377.11 534.382 378.766 536.195 379.944C546.64 386.727 563.619 389.586 570.145 396.111L574.582 400.549C574.582 400.549 553.189 406.389 517.607 423.591C502.447 430.92 516.273 453.637 516.273 453.637C516.273 453.637 508.495 456.176 505.555 460.701C501.525 466.904 505.701 471.886 506.322 479.25C506.852 485.537 504.219 491.271 507.352 495.969C510.772 501.098 517.013 502.492 520.407 504.84C532.336 513.093 538.128 533.601 560.353 536.414C570.01 537.637 585.175 534.041 585.175 534.041C585.175 534.041 603.702 556.233 616.239 563.012C621.375 565.79 629.821 566.135 629.821 566.135C629.821 566.135 636.324 566.362 638.702 568.74C640.79 570.828 644.383 576.322 649.404 579.442Z" fill="white"/>
        </mask>
</svg>

    </div>
    <!-- Spacer BEFORE sticky -->
    <div class="spacer"></div>

    <!-- Sticky background -->
    <section class="scroll-wrapper">
      <section class="main-section">
        <div class="video-layer">
          <video autoplay muted loop playsinline>
            <source
              src="./../../Assets/videos/Pixel_Dots.mp4"
              type="video/mp4"
            />
          </video>
        </div>

        <div class="fade-overlay"></div>

        <div class="mask-layer">
          <div class="mask-item mask-1">
            <video autoplay muted loop playsinline>
              <source
                src="./../../Assets/videos/Pixel_Dots.mp4"
                type="video/mp4"
              />
            </video>
          </div>

          <div class="mask-item mask-2">
            <video autoplay muted loop playsinline>
              <source
                src="./../../Assets/videos/Pixel_Dots.mp4"
                type="video/mp4"
              />
            </video>
          </div>

          <div class="mask-item mask-3">
            <video autoplay muted loop playsinline>
              <source
                src="./../../Assets/videos/Pixel_Dots.mp4"
                type="video/mp4"
              />
            </video>
          </div>
        </div>
      </section>

      <!-- Scrolling content -->
      <section class="content-layer">
        <div class="content-item">Section One</div>
        <div class="content-item">Section Two</div>
        <div class="content-item">Section Three</div>
      </section>
    </section>
    <!-- Spacer AFTER -->
    <div class="spacer"></div>

    <script>
        document.addEventListener("DOMContentLoaded", ()=>{

        
      gsap.registerPlugin(ScrollTrigger);

      const masks = gsap.utils.toArray(".mask-item");
      const contents = gsap.utils.toArray(".content-item");

      // initial mask
      gsap.set(masks, { opacity: 0 });
      gsap.set(masks[0], { opacity: 1 });

      // switch masks based on content scroll
      contents.forEach((content, i) => {
        ScrollTrigger.create({
          trigger: content,
          start: "top center",
          end: "bottom bottom",

          onEnter: () => {
            gsap.to(masks[i], { opacity: 1, duration: 0.5 });
            if (i > 0) gsap.to(masks[i - 1], { opacity: 0, duration: 0.5 });
          },

          onEnterBack: () => {
            gsap.to(masks[i], { opacity: 1, duration: 0.5 });
            if (i < masks.length - 1) {
              gsap.to(masks[i + 1], { opacity: 0, duration: 0.5 });
            }
          },
        });
      });
      })
    </script>
  </body>
</html>
